{"version":3,"sources":["src/hooks/useLPTokensState.tsx","src/components/LPTokenSelect.tsx","src/hooks/useMigrateState.tsx","src/screens/MigrateScreen.tsx"],"names":["useLPTokensState","mode","state","useTokenPairState","useContext","EthersContext","provider","signer","address","tokens","useState","lastTimeRefreshed","setLastTimeRefreshed","loading","setLoading","lpTokens","setLPTokens","selectedLPToken","setSelectedLPToken","pair","setPair","amount","setAmount","getPair","useSDK","updateLPTokens","a","async","fetchPools","fetchMyLPTokens","fetchMyUniswapLPTokens","data","useEffect","useAsyncEffect","undefined","tokenA","tokenB","useDelayedOnBlockEffect","block","length","fromToken","toToken","updateLastTimeRefreshed","Date","now","LPTokenList","emptyText","filter","Item","renderItem","useCallback","item","key","token","selected","onSelectToken","sort","t1","t2","totalDeposited","ethers","constants","Zero","sub","div","pow10","toNumber","amountDeposited","gt","balance","Loading","text","FlatList","keyExtractor","JSON","stringify","EmptyList","View","style","margin","Spacing","normal","Text","disabled","textAlign","width","LPTokenItem","props","textMedium","useColors","formatBalance","decimals","onPress","Selectable","containerStyle","marginBottom","ITEM_SEPARATOR_HEIGHT","FlexView","alignItems","TokenLogo","small","replaceWETH","marginLeft","medium","caption","tiny","symbol","flex","light","color","LPTokenSelect","Expandable","title","expanded","onExpand","useMigrateState","updateTokens","migrate","migrating","setMigrating","onMigrate","parseBalance","tx","wait","Migrate","marginTop","large","Border","AmountInput","TokenInput","onAmountChanged","Heading","AmountInfo","isEmptyValue","InfoBox","Meta","label","Controls","error","setError","onError","InsufficientBalanceButton","FetchingButton","message","code","ErrorMessage","MigrateButton","goToRemoveLiquidity","useLinker","Button","MigrateScreen","Screen","Container","Content","Title","Platform","OS","WebFooter"],"mappings":"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","file":"static/js/12.a0046663.chunk.js","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\n\nimport { Pair } from \"@sushiswap/sdk\";\nimport useAsyncEffect from \"use-async-effect\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport LPToken from \"../types/LPToken\";\nimport { fetchMyLPTokens, fetchMyUniswapLPTokens, fetchPools } from \"../utils/fetch-utils\";\nimport useDelayedOnBlockEffect from \"./useDelayedOnBlockEffect\";\nimport useSDK from \"./useSDK\";\nimport useTokenPairState, { TokenPairState } from \"./useTokenPairState\";\n\nexport interface LPTokensState extends TokenPairState {\n    updateLPTokens: () => Promise<void>;\n    lastTimeRefreshed: number;\n    updateLastTimeRefreshed: () => void;\n    lpTokens: LPToken[];\n    selectedLPToken?: LPToken;\n    setSelectedLPToken: (token?: LPToken) => void;\n    pair?: Pair;\n    amount: string;\n    setAmount: (amount: string) => void;\n}\n\ntype Mode = \"pools\" | \"my-lp-tokens\" | \"my-uniswap-lp-tokens\";\n\n// tslint:disable-next-line:max-func-body-length\nconst useLPTokensState: (mode: Mode) => LPTokensState = mode => {\n    const state = useTokenPairState();\n    const { provider, signer, address, tokens } = useContext(EthersContext);\n    const [lastTimeRefreshed, setLastTimeRefreshed] = useState(0);\n    const [loading, setLoading] = useState(true);\n    const [lpTokens, setLPTokens] = useState<LPToken[]>([]);\n    const [selectedLPToken, setSelectedLPToken] = useState<LPToken>();\n    const [pair, setPair] = useState<Pair>();\n    const [amount, setAmount] = useState(\"\");\n    const { getPair } = useSDK();\n\n    const updateLPTokens = async () => {\n        if (provider && signer) {\n            try {\n                const data = await (mode === \"pools\"\n                    ? fetchPools(provider, signer)\n                    : mode === \"my-lp-tokens\"\n                    ? fetchMyLPTokens(tokens, provider, signer)\n                    : fetchMyUniswapLPTokens(tokens, provider, signer));\n                if (data) {\n                    setLPTokens(data);\n                }\n            } finally {\n                setLoading(false);\n            }\n        }\n    };\n\n    useEffect(() => {\n        if (!selectedLPToken) {\n            setAmount(\"\");\n        }\n    }, [selectedLPToken]);\n\n    useAsyncEffect(async () => {\n        setLoading(true);\n        setPair(undefined);\n        if (selectedLPToken && provider) {\n            try {\n                setPair(await getPair(selectedLPToken.tokenA, selectedLPToken.tokenB, provider));\n            } catch (e) {\n            } finally {\n                setLoading(false);\n            }\n        } else {\n            setLoading(false);\n        }\n    }, [selectedLPToken, provider]);\n\n    useDelayedOnBlockEffect(\n        async block => {\n            if (address && (mode === \"pools\" || tokens.length > 0)) {\n                if (!block) {\n                    setLoading(true);\n                }\n                await updateLPTokens();\n            }\n        },\n        () => \"updateLPTokens()\",\n        [tokens.length, address, lastTimeRefreshed],\n        0\n    );\n\n    return {\n        ...state,\n        fromToken: state.fromToken || selectedLPToken?.tokenA,\n        toToken: state.toToken || selectedLPToken?.tokenB,\n        updateLPTokens,\n        loading: state.loading || loading,\n        lastTimeRefreshed,\n        updateLastTimeRefreshed: () => {\n            setLastTimeRefreshed(Date.now());\n        },\n        lpTokens,\n        selectedLPToken,\n        setSelectedLPToken,\n        pair,\n        amount,\n        setAmount\n    };\n};\n\nexport default useLPTokensState;\n","import React, { FC, useCallback } from \"react\";\nimport { FlatList, View, ViewStyle } from \"react-native\";\n\nimport { ethers } from \"ethers\";\nimport { Spacing } from \"../constants/dimension\";\nimport useColors from \"../hooks/useColors\";\nimport { LPTokensState } from \"../hooks/useLPTokensState\";\nimport LPToken from \"../types/LPToken\";\nimport { formatBalance, pow10 } from \"../utils\";\nimport CheckBox from \"./CheckBox\";\nimport Expandable from \"./Expandable\";\nimport FlexView from \"./FlexView\";\nimport { ITEM_SEPARATOR_HEIGHT } from \"./ItemSeparator\";\nimport Loading from \"./Loading\";\nimport Selectable from \"./Selectable\";\nimport Text from \"./Text\";\nimport TokenLogo from \"./TokenLogo\";\n\nexport type LPTokenSelectFilter = \"balance\" | \"amountDeposited\" | \"\";\n\nexport interface LPTokenSelectProps {\n    state: LPTokensState;\n    title: string;\n    emptyText: string;\n    showFilter?: boolean;\n    filter?: LPTokenSelectFilter;\n    onFilterChanged?: (filter: LPTokenSelectFilter) => void;\n    Item: FC<LPTokenItemProps>;\n    style?: ViewStyle;\n}\n\nexport interface LPTokenItemProps {\n    token: LPToken;\n    selected: boolean;\n    filter?: LPTokenSelectFilter;\n    onSelectToken: (token: LPToken) => void;\n}\n\nconst LPTokenSelect: FC<LPTokenSelectProps> = props => {\n    const onUnselectToken = () => props.state.setSelectedLPToken();\n    return (\n        <View style={props.style}>\n            <Expandable\n                title={props.title}\n                expanded={!props.state.selectedLPToken}\n                onExpand={() => props.state.setSelectedLPToken()}>\n                <LPTokenList state={props.state} filter={props.filter} emptyText={props.emptyText} Item={props.Item} />\n            </Expandable>\n            {props.state.selectedLPToken && (\n                <LPTokenItem token={props.state.selectedLPToken} selected={true} onSelectToken={onUnselectToken} />\n            )}\n        </View>\n    );\n};\n\nconst Filter = ({ filter, onFilterChanged }) => {\n    const handler = (f: string) => () => onFilterChanged(f);\n    return (\n        <FlexView style={{ width: \"100%\", justifyContent: \"flex-end\" }}>\n            <CheckBox checked={filter === \"balance\"} onPress={handler(\"balance\")} title={\"with balance\"} />\n            <CheckBox\n                checked={filter === \"amountDeposited\"}\n                onPress={handler(\"amountDeposited\")}\n                title={\"with deposit\"}\n            />\n            <CheckBox checked={!filter} onPress={handler(\"\")} title={\"all\"} />\n        </FlexView>\n    );\n};\n\n// tslint:disable-next-line:max-func-body-length\nconst LPTokenList = ({\n    state,\n    emptyText,\n    filter,\n    Item\n}: {\n    state: LPTokensState;\n    emptyText: string;\n    filter?: LPTokenSelectFilter;\n    Item: FC<LPTokenItemProps>;\n}) => {\n    const renderItem = useCallback(\n        ({ item }) => {\n            return (\n                <Item\n                    key={item.address}\n                    token={item}\n                    selected={false}\n                    filter={filter}\n                    onSelectToken={state.setSelectedLPToken}\n                />\n            );\n        },\n        [filter, state.setSelectedLPToken]\n    );\n    let data = state.lpTokens.sort((t1, t2) => {\n        return (t2.totalDeposited || ethers.constants.Zero)\n            .sub(t1.totalDeposited || ethers.constants.Zero)\n            .div(pow10(14))\n            .toNumber();\n    });\n    if (filter === \"amountDeposited\") {\n        data = data.filter(token => token.amountDeposited?.gt(0));\n    } else if (filter === \"balance\") {\n        data = data.filter(token => token.balance.gt(0));\n    }\n    return state.loading ? (\n        <Loading />\n    ) : data.length === 0 ? (\n        <EmptyList text={emptyText} />\n    ) : (\n        <FlatList keyExtractor={item => JSON.stringify(item)} data={data} renderItem={renderItem} />\n    );\n};\n\nconst EmptyList = ({ text }: { text: string }) => {\n    return (\n        <View style={{ margin: Spacing.normal }}>\n            <Text disabled={true} style={{ textAlign: \"center\", width: \"100%\" }}>\n                {text}\n            </Text>\n        </View>\n    );\n};\n\nexport const LPTokenItem: FC<LPTokenItemProps> = props => {\n    const { textMedium } = useColors();\n    const balance = formatBalance(props.token.balance, props.token.decimals, 8);\n    const onPress = useCallback(() => {\n        props.onSelectToken(props.token);\n    }, [props.onSelectToken, props.token]);\n    return (\n        <Selectable\n            selected={props.selected}\n            onPress={onPress}\n            containerStyle={{ marginBottom: ITEM_SEPARATOR_HEIGHT }}>\n            <FlexView style={{ alignItems: \"center\" }}>\n                <TokenLogo token={props.token.tokenA} small={true} replaceWETH={true} />\n                <TokenLogo token={props.token.tokenB} small={true} replaceWETH={true} style={{ marginLeft: 4 }} />\n                <Text medium={true} caption={true} style={{ marginLeft: Spacing.tiny }}>\n                    {props.token.tokenA.symbol}-{props.token.tokenB.symbol}\n                </Text>\n                <View style={{ flex: 1, marginLeft: Spacing.tiny }}>\n                    {/*<Text note={true} style={{ textAlign: \"right\", color: textLight }}>*/}\n                    {/*    My Balance*/}\n                    {/*</Text>*/}\n                    <Text caption={true} light={true} style={{ textAlign: \"right\", color: textMedium }}>\n                        {balance}\n                    </Text>\n                </View>\n            </FlexView>\n        </Selectable>\n    );\n};\n\nexport default LPTokenSelect;\n","import { useCallback, useContext, useState } from \"react\";\n\nimport { EthersContext } from \"../context/EthersContext\";\nimport { parseBalance } from \"../utils\";\nimport useLPTokensState, { LPTokensState } from \"./useLPTokensState\";\nimport useSDK from \"./useSDK\";\n\nexport interface MigrateState extends LPTokensState {\n    onMigrate: () => Promise<void>;\n    migrating: boolean;\n}\n\n// tslint:disable-next-line:max-func-body-length\nconst useMigrateState: () => MigrateState = () => {\n    const state = useLPTokensState(\"my-uniswap-lp-tokens\");\n    const { signer, updateTokens } = useContext(EthersContext);\n    const { migrate } = useSDK();\n    const [migrating, setMigrating] = useState(false);\n\n    const onMigrate = useCallback(async () => {\n        if (state.selectedLPToken && state.amount && signer) {\n            setMigrating(true);\n            try {\n                const amount = parseBalance(state.amount, state.selectedLPToken.decimals);\n                const tx = await migrate(state.selectedLPToken, amount, signer);\n                await tx.wait();\n                await updateTokens();\n                await state.updateLPTokens();\n                state.setSelectedLPToken(undefined);\n            } finally {\n                setMigrating(false);\n            }\n        }\n    }, [state.selectedLPToken, state.amount, signer, migrate, updateTokens]);\n\n    return {\n        ...state,\n        onMigrate,\n        migrating\n    };\n};\n\nexport default useMigrateState;\n","import React, { useState } from \"react\";\nimport { Platform, View } from \"react-native\";\n\nimport useAsyncEffect from \"use-async-effect\";\nimport Border from \"../components/Border\";\nimport Button from \"../components/Button\";\nimport Container from \"../components/Container\";\nimport Content from \"../components/Content\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport FetchingButton from \"../components/FetchingButton\";\nimport Heading from \"../components/Heading\";\nimport InfoBox from \"../components/InfoBox\";\nimport InsufficientBalanceButton from \"../components/InsufficientBalanceButton\";\nimport LPTokenSelect, { LPTokenItem } from \"../components/LPTokenSelect\";\nimport Meta from \"../components/Meta\";\nimport Text from \"../components/Text\";\nimport Title from \"../components/Title\";\nimport TokenInput from \"../components/TokenInput\";\nimport WebFooter from \"../components/web/WebFooter\";\nimport { MigrateSubMenu } from \"../components/web/WebSubMenu\";\nimport { Spacing } from \"../constants/dimension\";\nimport useLinker from \"../hooks/useLinker\";\nimport useMigrateState, { MigrateState } from \"../hooks/useMigrateState\";\nimport MetamaskError from \"../types/MetamaskError\";\nimport { isEmptyValue, parseBalance } from \"../utils\";\nimport Screen from \"./Screen\";\n\nconst MigrateScreen = () => {\n    return (\n        <Screen>\n            <MigrateSubMenu />\n            <Container>\n                <Content>\n                    <Title text={\"Migrate Liquidity\"} />\n                    <Text light={true}>Migrate your Uniswap LP tokens to SushiSwap LP tokens.</Text>\n                    <Migrate />\n                    {Platform.OS === \"web\" && <WebFooter />}\n                </Content>\n            </Container>\n        </Screen>\n    );\n};\n\nconst Migrate = () => {\n    const state = useMigrateState();\n    return (\n        <View style={{ marginTop: Spacing.large }}>\n            <LPTokenSelect\n                state={state}\n                title={\"Your Uniswap Liquidity\"}\n                emptyText={\"You don't have any liquidity on Uniswap.\"}\n                Item={LPTokenItem}\n            />\n            <Border />\n            <AmountInput state={state} />\n            <AmountInfo state={state} />\n        </View>\n    );\n};\n\nconst AmountInput = ({ state }: { state: MigrateState }) => {\n    if (!state.selectedLPToken) {\n        return <Heading text={\"Amount of Tokens\"} disabled={true} />;\n    }\n    return (\n        <TokenInput\n            title={\"Amount of Tokens\"}\n            token={state.selectedLPToken}\n            amount={state.amount}\n            onAmountChanged={state.setAmount}\n        />\n    );\n};\n\nconst AmountInfo = ({ state }: { state: MigrateState }) => {\n    const disabled = !state.selectedLPToken || isEmptyValue(state.amount);\n    return (\n        <InfoBox>\n            <Meta label={state.selectedLPToken?.symbol || \"SushiSwap LP\"} text={state.amount} disabled={disabled} />\n            <Controls state={state} />\n        </InfoBox>\n    );\n};\n\nconst Controls = ({ state }: { state: MigrateState }) => {\n    const [error, setError] = useState<MetamaskError>({});\n    useAsyncEffect(() => setError({}), [state.amount]);\n    return (\n        <View style={{ marginTop: Spacing.normal }}>\n            {!state.selectedLPToken || isEmptyValue(state.amount) ? (\n                <MigrateButton state={state} onError={setError} disabled={true} />\n            ) : parseBalance(state.amount, state.selectedLPToken.decimals).gt(state.selectedLPToken.balance) ? (\n                <InsufficientBalanceButton symbol={state.selectedLPToken.symbol} />\n            ) : state.loading ? (\n                <FetchingButton />\n            ) : (\n                <MigrateButton state={state} onError={setError} disabled={false} />\n            )}\n            {error.message && error.code !== 4001 && <ErrorMessage error={error} />}\n        </View>\n    );\n};\n\nconst MigrateButton = ({\n    state,\n    onError,\n    disabled\n}: {\n    state: MigrateState;\n    onError: (e) => void;\n    disabled: boolean;\n}) => {\n    const goToRemoveLiquidity = useLinker(\"/liquidity/remove\", \"RemoveLiquidity\");\n    const onPress = async () => {\n        onError({});\n        try {\n            await state.onMigrate();\n            goToRemoveLiquidity();\n        } catch (e) {\n            onError(e);\n        }\n    };\n    return <Button title={\"Migrate Liquidity\"} loading={state.migrating} onPress={onPress} disabled={disabled} />;\n};\n\nexport default MigrateScreen;\n"],"sourceRoot":""}